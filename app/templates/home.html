{% extends "base.html" %}

{% block title %}Home — kevin gerasim{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-white mb-2">Home</h1>
<p class="text-emerald-300/90 mb-8">Welcome to kevin gerasim.</p>

{% if posts %}
  <ul class="space-y-6">
    {% for post in posts %}
      <li class="rounded-3xl bg-black/40 backdrop-blur-md border border-white/10 p-6">
        <h2 class="text-xl font-semibold text-white mb-2">
          <a href="#" class="hover:text-emerald-400 transition">{{ post.title }}</a>
        </h2>
        <p class="text-sm text-emerald-400/80 mb-2">
          {{ post.date_posted.strftime('%B %d, %Y') }} — {{ post.author_name() }}
        </p>
        {% if post.image_url %}
          <img src="{{ post.image_url }}" alt="" class="rounded-2xl mb-4 max-h-80 w-full object-cover object-center border border-white/10">
        {% endif %}
        <div class="text-white/90 whitespace-pre-wrap mb-4">{{ post.content }}</div>
        {% if post.can_edit_delete(current_user) %}
          <div class="flex gap-2 pt-2 border-t border-white/10">
            <a href="{{ url_for('main.post_edit', post_id=post.id) }}" class="text-sm px-3 py-1.5 rounded-xl bg-white/10 text-emerald-300 border border-white/10 hover:bg-white/20 transition">
              Edit
            </a>
            <form action="{{ url_for('main.post_delete', post_id=post.id) }}" method="post" class="inline">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <button type="submit" class="text-sm px-3 py-1.5 rounded-xl bg-red-500/20 text-red-300 border border-red-400/30 hover:bg-red-500/30 transition" onclick="return confirm('Delete this post?');">
                Delete
              </button>
            </form>
          </div>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-white/70">No posts yet. <a href="{{ url_for('main.post_new') }}" class="text-emerald-400 font-medium hover:underline">Write the first one</a>.</p>
{% endif %}
{% endblock %}
