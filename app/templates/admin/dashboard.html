{% extends "base.html" %}

{% block title %}Admin — kevin gerasim{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-white mb-4">Admin dashboard</h1>
<p class="text-white/80 mb-6">
  <a href="{{ url_for('main.admin_users') }}" class="text-emerald-400 font-medium hover:underline">View users</a>
</p>

{% if posts %}
  <ul class="space-y-6">
    {% for post in posts %}
      <li class="rounded-3xl bg-black/40 backdrop-blur-md border border-white/10 p-6">
        <h2 class="text-xl font-semibold text-white mb-2">{{ post.title }}</h2>
        <p class="text-sm text-emerald-400/80 mb-2">
          {{ post.date_posted.strftime('%B %d, %Y') }} — {{ post.author_name() }}
        </p>
        {% if post.image_url %}
          <img src="{{ post.image_url }}" alt="" class="rounded-2xl mb-4 max-h-48 w-full object-cover object-center border border-white/10">
        {% endif %}
        <div class="text-white/80 whitespace-pre-wrap mb-4">{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</div>
        <div class="flex gap-2 pt-2 border-t border-white/10">
          <a href="{{ url_for('main.post_edit', post_id=post.id) }}" class="text-sm px-3 py-1.5 rounded-xl bg-white/10 text-emerald-300 border border-white/10 hover:bg-white/20 transition">
            Edit
          </a>
          <form action="{{ url_for('main.post_delete', post_id=post.id) }}" method="post" class="inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="text-sm px-3 py-1.5 rounded-xl bg-red-500/20 text-red-300 border border-red-400/30 hover:bg-red-500/30 transition" onclick="return confirm('Delete this post?');">
              Delete
            </button>
          </form>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="text-white/70">No posts yet.</p>
{% endif %}
{% endblock %}
